#summary Tutorial on dynamically loading and visualizing Java agents an environments with RL-Viz.  This tutorial makes use of the [SampleExperimentRLVizAppJava RLVizApp sample experiment].
#sidebar InfoSidebar

*Table of Contents*
<wiki:toc />
----

= Introduction =

This tutorial explains how you can use the RLVizApp to dynamically load an agent and environment, pick their parameters, and watch them interact with a graphical visualizer.

This tutorial is best done as a follow-up to the [GettingStarted basic getting started guide].  At the completion of that other tutorial you will have a `rl-library` directory with the RandomAgentJava and MountainCarJava agent and environment setup already.

If you install the [EpsilonGreedyTileCodingSarsaLambdaJava Tile Coding Sarsa Lambda] agent, you will also be able to visualize the value function as it is learned by the agent.

This experiment runs in _external_ mode, which means that the agent, environment, and experiment all communicate via sockets through the `rl_glue` executable socket server. Note: this means you need to have the [http://glue.rl-community.org/Home/rl-glue RL-Glue core project] installed.  There will be an upcoming tutorial about how to run in internal mode, so that everything stays inside a single Java virtual machine, and you don't even need RL-Glue Core.

* IMPORTANT NOTE * 
The instructions below have copy + paste-able instructions that have been brought in from the appropriate download pages.  Be warned: the instructions in THIS tutorial do not get updated as the version numbers of the actual download do.  What I mean is that if you follow these instructions to the letter, you are downloading OLD versions of everything.  You should actually follow the links to the download pages and follow the instructions there.  I just have them here also to give you a full picture of the steps involved.

= How RLVizApp Works =



= Getting the RLVizApp Experiment =
Assuming you have installed an agent and environment JAR in your `products` folder, we can now get the RLVizApp experiment and try it out.

For this guide, we'll download the [SampleExperimentRLVizAppJava RLVizApp sample experiment]. 

{{{
#Move into the rl-library folder
cd rl-library

#If you are on Linux, you can use wget which will download SampleExperimentRLVizApp-Java-R1207.tar.gz for you
wget http://rl-library.googlecode.com/files/SampleExperimentRLVizApp-Java-R1207.tar.gz

#This will add any project-specific things necessary to system and products folders
#It will also create a folder for this particular project
tar -zxf SampleExperimentRLVizApp-Java-R1207.tar.gz

#Clean up
rm SampleExperimentRLVizApp-Java-R1207.tar.gz
}}}

== Running RLVizApp ==
To run it, simple execute the `run.bash` script that was bundled with the project.

{{{
>$ cd SampleExperimentRLVizApp-Java-R1207
>$ bash run.bash

}}}

This will start up the agent, environment, and experiment program needed to run this example, and will also start the rl_glue executable socket server.

You should see a list of agents and environment in a panel on the right side of your screen.  Depending on which agent and environment you choose, you may also be able adjust the parameters.  For example, the [EpsilonGreedyTileCodingSarsaLambdaJava Tile Coding Sarsa Lambda] agent will allow you to adjust learning rate and tile coding parameters.

When you are ready, click on the button that says "Load Experiment". If things go well, the agent and environment will be loaded.  Now you can press "Start" or "Step", depending on whether you want to watch an experiment unfold automatically or if you want to go step by step.

If you want to change parameters, or a different agent or environment, you can press "Stop", and then "Unload Experiment".

= Going Further =
This tutorial provides a very brief introduction to running an experiment with RLVizApp.

RLVizApp has many parameters, and can be configured to do things like:
* Show any combination of the environment and agent visualizer windows
* Do *not* dynamically load the agent, environment, or both
  * This means you could start a standard Python/C/Lisp/Matlab RL-Glue agent, but still pick, parameterize, and visualize the environment with RLVizApp
* Look for the JAR files for agents, environments, and visualizers in different locations on your computer

These options are all set when the RLVizApp JAR is loaded.  In this case, you can see in the `run.bash` script a line like:
{{{
java -ea -Xmx128M -jar  $systemPath/common/libs/rl-viz/RLVizApp.jar list-agents=true list-environments=true env-viz=true agent-viz=true agent-environment-jar-path=$productsPath
}}}

If you wanted to load the/configure the environment dynamically, but start a fixed agent (maybe written in a different language), you could set it to:
{{{
java -ea -Xmx128M -jar  $systemPath/common/libs/rl-viz/RLVizApp.jar list-agents=false list-environments=true env-viz=true agent-viz=false agent-environment-jar-path=$productsPath
}}}

*Note:* To make the above example work, you'll also have to comment out the line in `run.bash` that starts the _AgentShell_.




We will soon make a different tutorial that explains how to run RLVizApp in _internal_ mode, so that you do not need the RL-Glue core project.

= Experiment Details =
Details about the experiments are in the README files in each experiment.  Basically, they each run a small number of episodes on an environment.

The RL-Glue experiment script runs an agent and environment outside of the experiment java program.  Alternatively, any rl-glue agent and environment could be started manually.  The experiment java program has no control over what agents and environments are being used and how they are configured.

The RL-Viz experiment can choose the environment and agent at runtime, by sending appropriate message the the environmentShell and the agentShell.  If you run the program it will tell you what environments and agents are available.  There is also a version in there that lets you run any RL-Glue agent externally.  Check the README.txt file in that directory.

There is optional code in that experiment to set the flag of `randomStartStates` in Mountain Car, as a quick example of runtime configuration.

= Running An Experiment = 

Go into the appropriate directory run the bash script.