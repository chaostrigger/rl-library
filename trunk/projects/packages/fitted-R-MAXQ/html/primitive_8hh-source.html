<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Fitted R-MAXQ: primitive.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_f7364f79d8ff301e2fa7be00dc334ae9.html">Agent</a></div>
<h1>primitive.hh</h1><a href="primitive_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _PRIMITIVE_HH_</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _PRIMITIVE_HH_</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00008"></a>00008 <span class="preprocessor">#include "<a class="code" href="action_8hh.html">action.hh</a>"</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include "<a class="code" href="averager_8hh.html">averager.hh</a>"</span>
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00012"></a>00012 
<a name="l00013"></a><a class="code" href="primitive_8hh.html#fcbc00680cce7048898cc2e09e75e14d">00013</a> <span class="keyword">class </span><a class="code" href="classVectorEffect.html">VectorEffect</a>;
<a name="l00014"></a>00014 <span class="keyword">typedef</span> boost::shared_ptr&lt;VectorEffect&gt; <a class="code" href="primitive_8hh.html#fcbc00680cce7048898cc2e09e75e14d">VectorEffectRef</a>;
<a name="l00015"></a>00015 
<a name="l00018"></a><a class="code" href="classVectorEffect.html">00018</a> <span class="keyword">class </span><a class="code" href="classVectorEffect.html">VectorEffect</a>: <span class="keyword">public</span> <a class="code" href="classEffect.html">Effect</a>
<a name="l00019"></a>00019 {
<a name="l00020"></a>00020 <span class="keyword">public</span>:
<a name="l00027"></a>00027   <span class="keyword">static</span> <a class="code" href="primitive_8hh.html#fcbc00680cce7048898cc2e09e75e14d">VectorEffectRef</a> <a class="code" href="classVectorEffect.html#ff7063b6f87e3749550e90d1354add25">create</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s,
<a name="l00028"></a>00028                                 <span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;succ,
<a name="l00029"></a>00029                                 <span class="keyword">const</span> <a class="code" href="state_8hh.html#32ae06ef538422e6aa7ddbb1572cfddd">StateVariables</a> &amp;<a class="code" href="FittedRmax-FPWorld_8cc.html#23652b995ead539bb1261b69fadc05c1">dimensions</a>);
<a name="l00030"></a>00030 
<a name="l00031"></a>00031   <span class="keyword">virtual</span> <a class="code" href="classVectorEffect.html#be0e8eaa5be6d3b8d510354095d30d69">~VectorEffect</a>();
<a name="l00032"></a>00032 
<a name="l00033"></a>00033   <span class="keyword">virtual</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> <a class="code" href="classVectorEffect.html#91ea026c312e25100580b199e1b82602">apply</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s) <span class="keyword">const</span>;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classVectorEffect.html#76281baad55570bc717271617157e77e">debug</a>(std::ostream &amp;out) <span class="keyword">const</span>;
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="classVectorEffect.html#066354577a5c12cc8412e8946c4f0adf">00037</a>   <span class="keywordtype">bool</span> <a class="code" href="classVectorEffect.html#066354577a5c12cc8412e8946c4f0adf">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="classVectorEffect.html">VectorEffect</a> &amp;other)<span class="keyword"> const </span>{
<a name="l00038"></a>00038     <span class="keywordflow">return</span> <a class="code" href="classVectorEffect.html#0a981a2f05e44102eb3bc297aa04f356">m_changes</a> &lt; other.<a class="code" href="classVectorEffect.html#0a981a2f05e44102eb3bc297aa04f356">m_changes</a>;
<a name="l00039"></a>00039   }
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="keyword">private</span>:
<a name="l00042"></a>00042   <a class="code" href="classVectorEffect.html#a7f9fd86981f89b3607cda506e489557">VectorEffect</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s,
<a name="l00043"></a>00043                <span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;succ,
<a name="l00044"></a>00044                <span class="keyword">const</span> <a class="code" href="state_8hh.html#32ae06ef538422e6aa7ddbb1572cfddd">StateVariables</a> &amp;dimensions);
<a name="l00045"></a>00045 
<a name="l00050"></a><a class="code" href="classVectorEffect.html#0a981a2f05e44102eb3bc297aa04f356">00050</a>   std::vector&lt;std::pair&lt;unsigned,double&gt; &gt; <a class="code" href="classVectorEffect.html#0a981a2f05e44102eb3bc297aa04f356">m_changes</a>;
<a name="l00051"></a>00051 };
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="primitive_8hh.html#cffa22f190ab415bff28ba0b09c2c744">00053</a> <span class="keyword">class </span><a class="code" href="classPrimitiveTask.html">PrimitiveTask</a>;
<a name="l00054"></a>00054 <span class="keyword">typedef</span> boost::shared_ptr&lt;PrimitiveTask&gt; <a class="code" href="primitive_8hh.html#cffa22f190ab415bff28ba0b09c2c744">PrimitiveTaskRef</a>;
<a name="l00055"></a>00055 
<a name="l00063"></a><a class="code" href="classPrimitiveTask.html">00063</a> <span class="keyword">class </span><a class="code" href="classPrimitiveTask.html">PrimitiveTask</a>: <span class="keyword">public</span> <a class="code" href="classTask.html">Task</a>
<a name="l00064"></a>00064 {
<a name="l00065"></a>00065 <span class="keyword">public</span>:
<a name="l00081"></a>00081   <span class="keyword">static</span> <a class="code" href="action_8hh.html#ebbdc64dd0e954309f7d84b47a9734ff">TaskRef</a> <a class="code" href="classPrimitiveTask.html#cd13d76e8398c6e6f099293a754ec592">create</a>(<span class="keyword">const</span> std::string &amp;<a class="code" href="classPrimitiveTask.html#fa2f8003dc6750a5a957ce481419fc6c">name</a>,
<a name="l00082"></a>00082                         <span class="keywordtype">int</span> primitive,
<a name="l00083"></a>00083                         <span class="keywordtype">double</span> threshold,
<a name="l00084"></a>00084                         <span class="keywordtype">double</span> <a class="code" href="FittedRmax-FPWorld_8cc.html#596dacebb8b2d3b98195ada0182442d3">maxval</a>,
<a name="l00085"></a>00085                         <span class="keyword">const</span> <a class="code" href="averager_8hh.html#749fa596c13494867102d3823a4da161">DynamicAveragerRef</a> &amp;modelapproximator,
<a name="l00086"></a>00086                         <span class="keyword">const</span> <a class="code" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> &amp;precondition);
<a name="l00087"></a>00087 
<a name="l00088"></a>00088   <span class="keyword">virtual</span> <a class="code" href="classPrimitiveTask.html#72593d9f714ab0cf62765b383cd7eefc">~PrimitiveTask</a>();
<a name="l00089"></a>00089 
<a name="l00090"></a>00090   <span class="keyword">virtual</span> <span class="keyword">const</span> std::string &amp;<a class="code" href="classPrimitiveTask.html#fa2f8003dc6750a5a957ce481419fc6c">name</a>() <span class="keyword">const</span>;
<a name="l00091"></a>00091   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classPrimitiveTask.html#0321887c92e72de52f4648a1acc3c6f6">available</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s) <span class="keyword">const</span>;
<a name="l00092"></a>00092   <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classPrimitiveTask.html#2ec43e14cff3f4256de1d1778c5671d9">terminal</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s) <span class="keyword">const</span>;
<a name="l00093"></a>00093   <span class="keyword">virtual</span> <a class="code" href="action_8hh.html#6281154b7ce7b0b6d13e32da4429f22e">StatePolicyRef</a> <a class="code" href="classPrimitiveTask.html#14c6c9275c27f21c976647bbba76b773">policy</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s);
<a name="l00094"></a>00094   <span class="keyword">virtual</span> <a class="code" href="action_8hh.html#c3ccf319df0159196b73a6f8cbd0e702">StateActionModelRef</a> <a class="code" href="classPrimitiveTask.html#5b1bcb9bda510253baedd1c9d2452084">model</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s);
<a name="l00095"></a>00095   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPrimitiveTask.html#298cefb9b883188586ac6ad83b8ee5c9">propagate_changes</a>();
<a name="l00096"></a>00096   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPrimitiveTask.html#167b0657ab07abd2165c64d12ec4aba4">debug</a>(std::ostream &amp;out);
<a name="l00097"></a>00097 
<a name="l00102"></a>00102   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPrimitiveTask.html#17b52f73561bbb68d3f1753f3d0c14c2">update</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s,
<a name="l00103"></a>00103                       <span class="keywordtype">double</span> r,
<a name="l00104"></a>00104                       <span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;succ);
<a name="l00105"></a>00105 
<a name="l00109"></a>00109   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPrimitiveTask.html#17b52f73561bbb68d3f1753f3d0c14c2">update</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s, <span class="keywordtype">double</span> r);
<a name="l00110"></a>00110 
<a name="l00112"></a><a class="code" href="classPrimitiveTask.html#520d5e4a9e3d0bbfe1b087190ffbe86b">00112</a>   <span class="keywordtype">int</span> <a class="code" href="classPrimitiveTask.html#520d5e4a9e3d0bbfe1b087190ffbe86b">action</a>()<span class="keyword"> const </span>{
<a name="l00113"></a>00113     <span class="keywordflow">return</span> <a class="code" href="classPrimitiveTask.html#f104f38e94a01af6786071eba8224567">m_primitive</a>;
<a name="l00114"></a>00114   }
<a name="l00115"></a>00115 
<a name="l00116"></a>00116 <span class="keyword">protected</span>:
<a name="l00120"></a><a class="code" href="classPrimitiveTask.html#55f939efd286e0da9d54f02016f7b549">00120</a>   <span class="keyword">typedef</span> std::vector&lt;std::pair&lt;EffectRef, unsigned&gt; &gt; <a class="code" href="classPrimitiveTask.html#55f939efd286e0da9d54f02016f7b549">EffectCounts</a>;
<a name="l00121"></a>00121   
<a name="l00122"></a>00122   <span class="comment">// Used in the update methods, which always produce vector effects.</span>
<a name="l00123"></a><a class="code" href="structPrimitiveTask_1_1VectorEffectCountsComparator.html">00123</a>   <span class="keyword">struct </span><a class="code" href="structPrimitiveTask_1_1VectorEffectCountsComparator.html">VectorEffectCountsComparator</a> {
<a name="l00124"></a><a class="code" href="structPrimitiveTask_1_1VectorEffectCountsComparator.html#98d9244174eabd5e4028119ecb4e8e6e">00124</a>     <span class="keywordtype">bool</span> <a class="code" href="structPrimitiveTask_1_1VectorEffectCountsComparator.html#98d9244174eabd5e4028119ecb4e8e6e">operator()</a>(<span class="keyword">const</span> EffectCounts::value_type &amp;x,
<a name="l00125"></a>00125                     <span class="keyword">const</span> EffectCounts::value_type &amp;y)<span class="keyword"> const </span>{
<a name="l00126"></a>00126       assert(dynamic_cast&lt;const VectorEffect *&gt;(x.first.get()));
<a name="l00127"></a>00127       assert(dynamic_cast&lt;const VectorEffect *&gt;(y.first.get()));
<a name="l00128"></a>00128       <span class="keyword">const</span> <a class="code" href="classVectorEffect.html">VectorEffect</a> *vx = static_cast&lt;const VectorEffect *&gt;(x.first.get());
<a name="l00129"></a>00129       <span class="keyword">const</span> <a class="code" href="classVectorEffect.html">VectorEffect</a> *vy = static_cast&lt;const VectorEffect *&gt;(y.first.get());
<a name="l00130"></a>00130       <span class="keywordflow">return</span> *vx &lt; *vy;
<a name="l00131"></a>00131     }
<a name="l00132"></a>00132   };
<a name="l00133"></a>00133 
<a name="l00134"></a><a class="code" href="classPrimitiveTask.html#17db518b88d9a5abd7c403a9910600cf">00134</a>   <span class="keyword">class </span><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a>;
<a name="l00135"></a>00135   <span class="keyword">typedef</span> boost::shared_ptr&lt;PrimitiveStateActionModel&gt;
<a name="l00136"></a>00136   <a class="code" href="classPrimitiveTask.html#17db518b88d9a5abd7c403a9910600cf">PrimitiveStateActionModelRef</a>;
<a name="l00137"></a>00137   <span class="keyword">typedef</span> boost::weak_ptr&lt;PrimitiveStateActionModel&gt;
<a name="l00138"></a><a class="code" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">00138</a>   <a class="code" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveStateActionModelWeakRef</a>;
<a name="l00139"></a>00139 
<a name="l00142"></a><a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">00142</a>   <span class="keyword">struct </span><a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> {
<a name="l00143"></a>00143     <a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html#86bde268f8c79f8992edc2fa2564aeed">PrimitiveStateActionData</a>();
<a name="l00144"></a>00144 
<a name="l00145"></a><a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html#2e95b8e0d061aadbe4926357e6c4de36">00145</a>     <span class="keywordtype">unsigned</span> <a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html#2e95b8e0d061aadbe4926357e6c4de36">count</a>;
<a name="l00146"></a><a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html#ed7d16268d9a12fbe88b4c2db4f4de78">00146</a>     <span class="keywordtype">double</span> <a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html#ed7d16268d9a12fbe88b4c2db4f4de78">cumulative_reward</a>;
<a name="l00147"></a><a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html#87f8e350422a3bd397e58784659cacee">00147</a>     <a class="code" href="classPrimitiveTask.html#55f939efd286e0da9d54f02016f7b549">EffectCounts</a> <a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html#87f8e350422a3bd397e58784659cacee">effect_counts</a>;
<a name="l00148"></a><a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html#c3c1c60982ac39600e193b6419a8dbd7">00148</a>     std::vector&lt;PrimitiveStateActionModelWeakRef&gt; <a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html#c3c1c60982ac39600e193b6419a8dbd7">observers</a>;
<a name="l00149"></a>00149   };
<a name="l00150"></a>00150 
<a name="l00153"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">00153</a>   <span class="keyword">class </span><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a>: <span class="keyword">public</span> <a class="code" href="classStateActionModel.html">StateActionModel</a>,
<a name="l00154"></a>00154                                    <span class="keyword">public</span> <a class="code" href="classAverage.html">Average</a>::Observer
<a name="l00155"></a>00155   {
<a name="l00156"></a>00156   <span class="keyword">public</span>:
<a name="l00162"></a>00162     <span class="keyword">static</span> <a class="code" href="classPrimitiveTask.html#17db518b88d9a5abd7c403a9910600cf">PrimitiveStateActionModelRef</a>
<a name="l00163"></a>00163     <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#6aa2211140f8312c1b6022f1ca5590bf">create</a>(<span class="keyword">const</span> <a class="code" href="primitive_8hh.html#cffa22f190ab415bff28ba0b09c2c744">PrimitiveTaskRef</a> &amp;parent, <span class="keyword">const</span> <a class="code" href="averager_8hh.html#eb852172e15caa33a6e213056c09dc06">AverageRef</a> &amp;average,
<a name="l00164"></a>00164            <a class="code" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveStateActionModelWeakRef</a> &amp;ref);
<a name="l00165"></a>00165 
<a name="l00166"></a>00166     <span class="keyword">virtual</span> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#e5a14da4f258a59c44b47e40644f8c6b">~PrimitiveStateActionModel</a>();
<a name="l00167"></a>00167 
<a name="l00168"></a>00168     <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;<a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#7c09b691541d63a89a279c27408c3a9c">state</a>() <span class="keyword">const</span>;
<a name="l00169"></a>00169     <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#fbeabcb41bea5f7d77b13be12bfa92dc">reward</a>() <span class="keyword">const</span>;
<a name="l00170"></a>00170     <span class="keyword">virtual</span> <span class="keyword">const</span> <a class="code" href="action_8hh.html#626c25d58262ddb00339679776c6b8d9">EffectDistribution</a> &amp;<a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#df76274f893d1db3a13b60ec375f5445">effects</a>() <span class="keyword">const</span>;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#a52d06641306693fe3e0af04ba7399c2">observe_average_change</a>();
<a name="l00173"></a>00173 
<a name="l00178"></a>00178     <span class="keywordtype">void</span> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#331edb606891d0fe15ada57b60e0a125">compute_model</a>();
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="keywordtype">void</span> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#12564154f0a1a189ce3abb2a9fc12688">debug</a>(std::ostream &amp;out) <span class="keyword">const</span>;
<a name="l00181"></a>00181 
<a name="l00182"></a>00182   <span class="keyword">private</span>:
<a name="l00183"></a>00183     <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#33d140150e3e31aacc3c34480248ddf8">PrimitiveStateActionModel</a>(<span class="keyword">const</span> <a class="code" href="primitive_8hh.html#cffa22f190ab415bff28ba0b09c2c744">PrimitiveTaskRef</a> &amp;parent,
<a name="l00184"></a>00184                               <span class="keyword">const</span> <a class="code" href="averager_8hh.html#eb852172e15caa33a6e213056c09dc06">AverageRef</a> &amp;average);
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#18088c6de8f87f16956cb36a11c68aaf">00186</a>     <span class="keyword">const</span> <a class="code" href="primitive_8hh.html#cffa22f190ab415bff28ba0b09c2c744">PrimitiveTaskRef</a> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#18088c6de8f87f16956cb36a11c68aaf">m_parent</a>;
<a name="l00187"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#4c6d7f3310b6b2ffb0a3780c0d1a0a4c">00187</a>     <span class="keyword">const</span> <a class="code" href="averager_8hh.html#eb852172e15caa33a6e213056c09dc06">AverageRef</a> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#4c6d7f3310b6b2ffb0a3780c0d1a0a4c">m_average</a>;
<a name="l00188"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#8166dcc62dbf059c8b19e8c3f5a00fb8">00188</a>     <span class="keywordtype">double</span> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#8166dcc62dbf059c8b19e8c3f5a00fb8">m_sum</a>;
<a name="l00189"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#1b6f75fe0f85d00823175fe69a5597f4">00189</a>     <span class="keywordtype">double</span> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#1b6f75fe0f85d00823175fe69a5597f4">m_r</a>;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191     <span class="keyword">typedef</span> std::vector&lt;std::pair&lt;StateVectorRef, PrimitiveStateActionData *&gt; &gt;
<a name="l00192"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#ecccb41bd38d362e90d67f03c745e066">00192</a>     <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#ecccb41bd38d362e90d67f03c745e066">StateTranslation</a>;
<a name="l00193"></a>00193 
<a name="l00202"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#d64839c1c3efce3b78035c54a1a0cd1f">00202</a>     <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#ecccb41bd38d362e90d67f03c745e066">StateTranslation</a> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#d64839c1c3efce3b78035c54a1a0cd1f">m_translation</a>;
<a name="l00203"></a>00203 
<a name="l00205"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#1f588383c6cbbe3d6852600a023a1696">00205</a>     <a class="code" href="action_8hh.html#626c25d58262ddb00339679776c6b8d9">EffectDistribution</a> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#1f588383c6cbbe3d6852600a023a1696">m_effects_map</a>;
<a name="l00206"></a>00206 
<a name="l00208"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#f47902940dbc1d60654f00855218f7b0">00208</a>     <span class="keyword">static</span> <a class="code" href="action_8hh.html#626c25d58262ddb00339679776c6b8d9">EffectDistribution</a> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#f47902940dbc1d60654f00855218f7b0">s_empty</a>;
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#f0203597019fdf940453450cd60a288d">00210</a>     <a class="code" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveStateActionModelWeakRef</a> <a class="code" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#f0203597019fdf940453450cd60a288d">m_this</a>;
<a name="l00211"></a>00211   };
<a name="l00212"></a>00212 
<a name="l00213"></a>00213   <span class="keyword">static</span> std::string <a class="code" href="classPrimitiveTask.html#e3bc070d4cc07c8520a1787d6b00e88b">compute_name</a>(<span class="keywordtype">int</span> primitive);
<a name="l00214"></a>00214 
<a name="l00215"></a>00215   <a class="code" href="classPrimitiveTask.html#08c4ba5db57ca4c5fee827079d6ab1e2">PrimitiveTask</a>(<span class="keyword">const</span> std::string &amp;name,
<a name="l00216"></a>00216                 <span class="keywordtype">int</span> primitive,
<a name="l00217"></a>00217                 <span class="keywordtype">double</span> threshold,
<a name="l00218"></a>00218                 <span class="keywordtype">double</span> maxval,
<a name="l00219"></a>00219                 <span class="keyword">const</span> <a class="code" href="averager_8hh.html#749fa596c13494867102d3823a4da161">DynamicAveragerRef</a> &amp;modelapproximator,
<a name="l00220"></a>00220                 <span class="keyword">const</span> <a class="code" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> &amp;precondition);
<a name="l00221"></a>00221 
<a name="l00222"></a><a class="code" href="classPrimitiveTask.html#d2a12ec48dd60814f42e98e431e93a95">00222</a>   <span class="keywordtype">void</span> <a class="code" href="classPrimitiveTask.html#d2a12ec48dd60814f42e98e431e93a95">set_weak_this_reference</a>(<span class="keyword">const</span> <a class="code" href="primitive_8hh.html#cffa22f190ab415bff28ba0b09c2c744">PrimitiveTaskRef</a> &amp;ref) {
<a name="l00223"></a>00223     <a class="code" href="classPrimitiveTask.html#3eae5d6a027605b316e71f412de2079e">m_this</a> = ref;
<a name="l00224"></a>00224   }
<a name="l00225"></a>00225 
<a name="l00226"></a>00226   <span class="comment">// Hook for subclass to replace dynamic averager with non-dynamic.</span>
<a name="l00227"></a>00227   <span class="keyword">virtual</span> <a class="code" href="averager_8hh.html#9db2ed62c7922adac793f2607dcc9ae2">AveragerRef</a> <a class="code" href="classPrimitiveTask.html#37973b035721dad8d8b8fe2c522548ee">averager</a>() <span class="keyword">const</span>;
<a name="l00228"></a>00228 
<a name="l00236"></a><a class="code" href="classPrimitiveTask.html#3ac3595f5617ad504d0f8eb3f5e1fce4">00236</a>   <a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> *<a class="code" href="classPrimitiveTask.html#3ac3595f5617ad504d0f8eb3f5e1fce4">get_data</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;state) {
<a name="l00237"></a>00237     <a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> *&amp;dat = <a class="code" href="classPrimitiveTask.html#eeb8be160ad353c61df7fef7eed128d5">m_data</a>[state];
<a name="l00238"></a>00238     <span class="keywordflow">if</span> (dat == NULL)
<a name="l00239"></a>00239       dat = <span class="keyword">new</span> <a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a>;
<a name="l00240"></a>00240     <span class="keywordflow">return</span> dat;
<a name="l00241"></a>00241   }
<a name="l00242"></a>00242 
<a name="l00248"></a>00248   <span class="keywordtype">void</span> <a class="code" href="classPrimitiveTask.html#17b52f73561bbb68d3f1753f3d0c14c2">update</a>(PrimitiveStateActionData *dat, <span class="keywordtype">double</span> r);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="keyword">private</span>:
<a name="l00251"></a><a class="code" href="classPrimitiveTask.html#56222cf65938ad991105d95b3bea755d">00251</a>   <span class="keyword">const</span> std::string <a class="code" href="classPrimitiveTask.html#56222cf65938ad991105d95b3bea755d">m_name</a>;
<a name="l00252"></a>00252 
<a name="l00253"></a><a class="code" href="classPrimitiveTask.html#f104f38e94a01af6786071eba8224567">00253</a>   <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="classPrimitiveTask.html#f104f38e94a01af6786071eba8224567">m_primitive</a>;
<a name="l00254"></a><a class="code" href="classPrimitiveTask.html#522855a6707d36bd53f1523e9ed28615">00254</a>   <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="classPrimitiveTask.html#522855a6707d36bd53f1523e9ed28615">m_threshold</a>;
<a name="l00255"></a><a class="code" href="classPrimitiveTask.html#8d12da0fac9616aea7c4d6314794cb4b">00255</a>   <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code" href="classPrimitiveTask.html#8d12da0fac9616aea7c4d6314794cb4b">m_maxval</a>;
<a name="l00256"></a>00256 
<a name="l00257"></a><a class="code" href="classPrimitiveTask.html#e56d82bcd6ded4ea98dc978df96b3b0a">00257</a>   <span class="keyword">const</span> <a class="code" href="averager_8hh.html#749fa596c13494867102d3823a4da161">DynamicAveragerRef</a> <a class="code" href="classPrimitiveTask.html#e56d82bcd6ded4ea98dc978df96b3b0a">m_averager</a>;
<a name="l00258"></a><a class="code" href="classPrimitiveTask.html#7f298bfc303c1dfd9be73d843214e7f9">00258</a>   <span class="keyword">const</span> <a class="code" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> <a class="code" href="classPrimitiveTask.html#7f298bfc303c1dfd9be73d843214e7f9">m_precondition</a>;
<a name="l00259"></a>00259 
<a name="l00260"></a>00260   <span class="keyword">typedef</span> __gnu_cxx::hash_map&lt;<a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a>,
<a name="l00261"></a>00261                               <a class="code" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> *,
<a name="l00262"></a><a class="code" href="classPrimitiveTask.html#1fac52c140a2100b93682f7c3abb898c">00262</a>                               <a class="code" href="structStateHasher.html">StateHasher</a>&gt; <a class="code" href="classPrimitiveTask.html#1fac52c140a2100b93682f7c3abb898c">DataContainer</a>;
<a name="l00263"></a>00263 
<a name="l00269"></a><a class="code" href="classPrimitiveTask.html#eeb8be160ad353c61df7fef7eed128d5">00269</a>   <a class="code" href="classPrimitiveTask.html#1fac52c140a2100b93682f7c3abb898c">DataContainer</a> <a class="code" href="classPrimitiveTask.html#eeb8be160ad353c61df7fef7eed128d5">m_data</a>;
<a name="l00270"></a>00270 
<a name="l00271"></a>00271   <span class="keyword">typedef</span> __gnu_cxx::hash_map&lt;<a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a>,
<a name="l00272"></a>00272                               <a class="code" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveStateActionModelWeakRef</a>,
<a name="l00273"></a><a class="code" href="classPrimitiveTask.html#6953483f10eabeedd24bd347662bb039">00273</a>                               <a class="code" href="structStateHasher.html">StateHasher</a>&gt; <a class="code" href="classPrimitiveTask.html#6953483f10eabeedd24bd347662bb039">ModelContainer</a>;
<a name="l00274"></a>00274 
<a name="l00279"></a><a class="code" href="classPrimitiveTask.html#4d7fc5367a292a434b30c72a6b2f5bb8">00279</a>   <a class="code" href="classPrimitiveTask.html#6953483f10eabeedd24bd347662bb039">ModelContainer</a> <a class="code" href="classPrimitiveTask.html#4d7fc5367a292a434b30c72a6b2f5bb8">m_models</a>;
<a name="l00280"></a>00280 
<a name="l00285"></a><a class="code" href="classPrimitiveTask.html#3fb782963a2a6b9a6a67453124fd6a94">00285</a>   std::set&lt;PrimitiveStateActionModelWeakRef&gt; <a class="code" href="classPrimitiveTask.html#3fb782963a2a6b9a6a67453124fd6a94">m_inbox</a>;
<a name="l00286"></a>00286 
<a name="l00287"></a><a class="code" href="classPrimitiveTask.html#3eae5d6a027605b316e71f412de2079e">00287</a>   boost::weak_ptr&lt;PrimitiveTask&gt; <a class="code" href="classPrimitiveTask.html#3eae5d6a027605b316e71f412de2079e">m_this</a>;
<a name="l00288"></a>00288 };
<a name="l00289"></a>00289 
<a name="l00290"></a><a class="code" href="primitive_8hh.html#c3e3664c5aae444ce9b16cf34b9308bf">00290</a> <span class="keyword">class </span><a class="code" href="classDiscretizedPrimitiveTask.html">DiscretizedPrimitiveTask</a>;
<a name="l00291"></a>00291 <span class="keyword">typedef</span> boost::shared_ptr&lt;DiscretizedPrimitiveTask&gt;
<a name="l00292"></a>00292 <a class="code" href="primitive_8hh.html#c3e3664c5aae444ce9b16cf34b9308bf">DiscretizedPrimitiveTaskRef</a>;
<a name="l00293"></a>00293 
<a name="l00300"></a><a class="code" href="classDiscretizedPrimitiveTask.html">00300</a> <span class="keyword">class </span><a class="code" href="classDiscretizedPrimitiveTask.html">DiscretizedPrimitiveTask</a>: <span class="keyword">public</span> <a class="code" href="classPrimitiveTask.html">PrimitiveTask</a>
<a name="l00301"></a>00301 {
<a name="l00302"></a>00302 <span class="keyword">public</span>:
<a name="l00319"></a>00319   <span class="keyword">static</span> <a class="code" href="action_8hh.html#ebbdc64dd0e954309f7d84b47a9734ff">TaskRef</a> <a class="code" href="classDiscretizedPrimitiveTask.html#218ee1ec3c9819390c210e3f487068c6">create</a>(<span class="keyword">const</span> std::string &amp;<a class="code" href="classPrimitiveTask.html#fa2f8003dc6750a5a957ce481419fc6c">name</a>,
<a name="l00320"></a>00320                         <span class="keywordtype">int</span> primitive,
<a name="l00321"></a>00321                         <span class="keywordtype">unsigned</span> threshold,
<a name="l00322"></a>00322                         <span class="keywordtype">double</span> <a class="code" href="FittedRmax-FPWorld_8cc.html#596dacebb8b2d3b98195ada0182442d3">maxval</a>,
<a name="l00323"></a>00323                         <span class="keywordtype">int</span> <a class="code" href="FittedRmax-FPWorld_8cc.html#c44fd459d598de1da21febbbaf6cea22">resolutionfactor</a>,
<a name="l00324"></a>00324                         <span class="keyword">const</span> <a class="code" href="state_8hh.html#32ae06ef538422e6aa7ddbb1572cfddd">StateVariables</a> &amp;scale,
<a name="l00325"></a>00325                         <span class="keyword">const</span> <a class="code" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> &amp;precondition);
<a name="l00326"></a>00326 
<a name="l00327"></a>00327   <span class="keyword">virtual</span> <a class="code" href="classDiscretizedPrimitiveTask.html#887dda2f7cd64953b43dd7d6dc6d66bb">~DiscretizedPrimitiveTask</a>();
<a name="l00328"></a>00328   
<a name="l00329"></a>00329   <span class="comment">// Override superclass implementation of these methods for efficiency.</span>
<a name="l00330"></a>00330   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classDiscretizedPrimitiveTask.html#08c37b90d5a0ddf03e31f50049777ca7">update</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s,
<a name="l00331"></a>00331                       <span class="keywordtype">double</span> r,
<a name="l00332"></a>00332                       <span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;succ);
<a name="l00333"></a>00333   <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classDiscretizedPrimitiveTask.html#08c37b90d5a0ddf03e31f50049777ca7">update</a>(<span class="keyword">const</span> <a class="code" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s, <span class="keywordtype">double</span> r);
<a name="l00334"></a>00334 
<a name="l00335"></a>00335 <span class="keyword">protected</span>:
<a name="l00336"></a>00336   <span class="comment">// Used in the update methods, which always produce absolute effects.</span>
<a name="l00337"></a><a class="code" href="structDiscretizedPrimitiveTask_1_1AbsoluteEffectCountsComparator.html">00337</a>   <span class="keyword">struct </span><a class="code" href="structDiscretizedPrimitiveTask_1_1AbsoluteEffectCountsComparator.html">AbsoluteEffectCountsComparator</a> {
<a name="l00338"></a><a class="code" href="structDiscretizedPrimitiveTask_1_1AbsoluteEffectCountsComparator.html#0be034e1be8497b0239605440d9b5fc4">00338</a>     <span class="keywordtype">bool</span> <a class="code" href="structDiscretizedPrimitiveTask_1_1AbsoluteEffectCountsComparator.html#0be034e1be8497b0239605440d9b5fc4">operator()</a>(<span class="keyword">const</span> EffectCounts::value_type &amp;x,
<a name="l00339"></a>00339                     <span class="keyword">const</span> EffectCounts::value_type &amp;y)<span class="keyword"> const </span>{
<a name="l00340"></a>00340       assert(dynamic_cast&lt;const AbsoluteEffect *&gt;(x.first.get()));
<a name="l00341"></a>00341       assert(dynamic_cast&lt;const AbsoluteEffect *&gt;(y.first.get()));
<a name="l00342"></a>00342       <span class="keyword">const</span> <a class="code" href="classAbsoluteEffect.html">AbsoluteEffect</a> *vx = static_cast&lt;const AbsoluteEffect *&gt;(x.first.get());
<a name="l00343"></a>00343       <span class="keyword">const</span> <a class="code" href="classAbsoluteEffect.html">AbsoluteEffect</a> *vy = static_cast&lt;const AbsoluteEffect *&gt;(y.first.get());
<a name="l00344"></a>00344       <span class="keywordflow">return</span> *vx &lt; *vy;
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346   };
<a name="l00347"></a>00347 
<a name="l00348"></a>00348   <span class="keyword">virtual</span> <a class="code" href="averager_8hh.html#9db2ed62c7922adac793f2607dcc9ae2">AveragerRef</a> <a class="code" href="classDiscretizedPrimitiveTask.html#d8ee5c0604a023f24e328a050dd1601d">averager</a>() <span class="keyword">const</span>;
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 <span class="keyword">private</span>:
<a name="l00351"></a>00351   <a class="code" href="classDiscretizedPrimitiveTask.html#13be47f2a33237d8f612612cf17440e4">DiscretizedPrimitiveTask</a>(<span class="keyword">const</span> std::string &amp;name,
<a name="l00352"></a>00352                            <span class="keywordtype">int</span> primitive,
<a name="l00353"></a>00353                            <span class="keywordtype">unsigned</span> threshold,
<a name="l00354"></a>00354                            <span class="keywordtype">double</span> maxval,
<a name="l00355"></a>00355                            <span class="keywordtype">int</span> resolutionfactor,
<a name="l00356"></a>00356                            <span class="keyword">const</span> <a class="code" href="state_8hh.html#32ae06ef538422e6aa7ddbb1572cfddd">StateVariables</a> &amp;scale,
<a name="l00357"></a>00357                            <span class="keyword">const</span> <a class="code" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> &amp;precondition);
<a name="l00358"></a>00358 
<a name="l00359"></a><a class="code" href="classDiscretizedPrimitiveTask.html#6fbd9f8e8168468d00e28661be4db5c2">00359</a>   <a class="code" href="averager_8hh.html#9db2ed62c7922adac793f2607dcc9ae2">AveragerRef</a> <a class="code" href="classDiscretizedPrimitiveTask.html#6fbd9f8e8168468d00e28661be4db5c2">m_discrete_averager</a>;
<a name="l00360"></a>00360 };
<a name="l00361"></a>00361 
<a name="l00362"></a>00362 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Dec 1 14:50:56 2010 for Fitted R-MAXQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
