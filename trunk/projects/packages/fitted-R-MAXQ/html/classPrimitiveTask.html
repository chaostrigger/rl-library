<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Fitted R-MAXQ: PrimitiveTask Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>PrimitiveTask Class Reference</h1><!-- doxytag: class="PrimitiveTask" --><!-- doxytag: inherits="Task" -->A <a class="el" href="classTask.html">Task</a> that represents a primitive action provided by the environment.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="primitive_8hh-source.html">primitive.hh</a>&gt;</code>
<p>
<p>Inheritance diagram for PrimitiveTask:
<p><center><img src="classPrimitiveTask.png" usemap="#PrimitiveTask_map" border="0" alt=""></center>
<map name="PrimitiveTask_map">
<area href="classTask.html" alt="Task" shape="rect" coords="0,0,149,24">
<area href="classDiscretizedPrimitiveTask.html" alt="DiscretizedPrimitiveTask" shape="rect" coords="0,112,149,136">
</map>
<a href="classPrimitiveTask-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#72593d9f714ab0cf62765b383cd7eefc">~PrimitiveTask</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual const std::string &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#fa2f8003dc6750a5a957ce481419fc6c">name</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#0321887c92e72de52f4648a1acc3c6f6">available</a> (const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Whether this task may be executed in a given state.  <a href="#0321887c92e72de52f4648a1acc3c6f6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#2ec43e14cff3f4256de1d1778c5671d9">terminal</a> (const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Whether this task terminates in a given state.  <a href="#2ec43e14cff3f4256de1d1778c5671d9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="action_8hh.html#6281154b7ce7b0b6d13e32da4429f22e">StatePolicyRef</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#14c6c9275c27f21c976647bbba76b773">policy</a> (const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gives the subtask to perform at the given state.  <a href="#14c6c9275c27f21c976647bbba76b773"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="action_8hh.html#c3ccf319df0159196b73a6f8cbd0e702">StateActionModelRef</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#5b1bcb9bda510253baedd1c9d2452084">model</a> (const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gives the dynamics of this task at the given state.  <a href="#5b1bcb9bda510253baedd1c9d2452084"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#298cefb9b883188586ac6ad83b8ee5c9">propagate_changes</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Propagates changes in either the data (for PrimitiveTasks) or from lower level tasks (for CompositeTasks) to the (possibly abstract) model of this <a class="el" href="classTask.html">Task</a>.  <a href="#298cefb9b883188586ac6ad83b8ee5c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#167b0657ab07abd2165c64d12ec4aba4">debug</a> (std::ostream &amp;out)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#17b52f73561bbb68d3f1753f3d0c14c2">update</a> (const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s, double r, const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;succ)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Incorporates a nonterminal experience to update the model.  <a href="#17b52f73561bbb68d3f1753f3d0c14c2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#dadb5e4269d027a6a0e7e9785185ccdf">update</a> (const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;s, double r)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Incorporates a terminal experience to update the model.  <a href="#dadb5e4269d027a6a0e7e9785185ccdf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#520d5e4a9e3d0bbfe1b087190ffbe86b">action</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The primitive action that this <a class="el" href="classTask.html">Task</a> models.  <a href="#520d5e4a9e3d0bbfe1b087190ffbe86b"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="action_8hh.html#ebbdc64dd0e954309f7d84b47a9734ff">TaskRef</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#cd13d76e8398c6e6f099293a754ec592">create</a> (const std::string &amp;name, int primitive, double threshold, double <a class="el" href="Rmaxq-Taxi_8cc.html#596dacebb8b2d3b98195ada0182442d3">maxval</a>, const <a class="el" href="averager_8hh.html#749fa596c13494867102d3823a4da161">DynamicAveragerRef</a> &amp;modelapproximator, const <a class="el" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> &amp;precondition)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new <a class="el" href="classPrimitiveTask.html">PrimitiveTask</a> object, initialized with no data.  <a href="#cd13d76e8398c6e6f099293a754ec592"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef std::vector&lt; std::pair&lt;<br>
 <a class="el" href="action_8hh.html#6db387a1b7176f31921d6c6d33cac115">EffectRef</a>, unsigned &gt; &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#55f939efd286e0da9d54f02016f7b549">EffectCounts</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A tally of observed effects.  <a href="#55f939efd286e0da9d54f02016f7b549"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef boost::shared_ptr&lt;<br>
 <a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#17db518b88d9a5abd7c403a9910600cf">PrimitiveStateActionModelRef</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef boost::weak_ptr&lt; <a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveStateActionModelWeakRef</a></td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#08c4ba5db57ca4c5fee827079d6ab1e2">PrimitiveTask</a> (const std::string &amp;name, int primitive, double threshold, double <a class="el" href="Rmaxq-Taxi_8cc.html#596dacebb8b2d3b98195ada0182442d3">maxval</a>, const <a class="el" href="averager_8hh.html#749fa596c13494867102d3823a4da161">DynamicAveragerRef</a> &amp;modelapproximator, const <a class="el" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> &amp;precondition)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#d2a12ec48dd60814f42e98e431e93a95">set_weak_this_reference</a> (const <a class="el" href="primitive_8hh.html#cffa22f190ab415bff28ba0b09c2c744">PrimitiveTaskRef</a> &amp;ref)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual <a class="el" href="averager_8hh.html#9db2ed62c7922adac793f2607dcc9ae2">AveragerRef</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#37973b035721dad8d8b8fe2c522548ee">averager</a> () const </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#3ac3595f5617ad504d0f8eb3f5e1fce4">get_data</a> (const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;state)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fetches or creates a data structure for recording the observed data for a given state (with this primitive action).  <a href="#3ac3595f5617ad504d0f8eb3f5e1fce4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#b6d08c9cb7f6a5b3ce4650bb0983b2af">update</a> (<a class="el" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> *dat, double r)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Completes an update of the data record (for some state), performing all the changes that do not depend on whether or not the new data comes from a terminal transition.  <a href="#b6d08c9cb7f6a5b3ce4650bb0983b2af"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#e3bc070d4cc07c8520a1787d6b00e88b">compute_name</a> (int primitive)</td></tr>

<tr><td colspan="2"><br><h2>Private Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef __gnu_cxx::hash_map&lt;<br>
 <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a>, <a class="el" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> *,<br>
 <a class="el" href="structStateHasher.html">StateHasher</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#1fac52c140a2100b93682f7c3abb898c">DataContainer</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef __gnu_cxx::hash_map&lt;<br>
 <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a>, <a class="el" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveStateActionModelWeakRef</a>,<br>
 <a class="el" href="structStateHasher.html">StateHasher</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#6953483f10eabeedd24bd347662bb039">ModelContainer</a></td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#56222cf65938ad991105d95b3bea755d">m_name</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#f104f38e94a01af6786071eba8224567">m_primitive</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#522855a6707d36bd53f1523e9ed28615">m_threshold</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#8d12da0fac9616aea7c4d6314794cb4b">m_maxval</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="averager_8hh.html#749fa596c13494867102d3823a4da161">DynamicAveragerRef</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#e56d82bcd6ded4ea98dc978df96b3b0a">m_averager</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const <a class="el" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#7f298bfc303c1dfd9be73d843214e7f9">m_precondition</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classPrimitiveTask.html#1fac52c140a2100b93682f7c3abb898c">DataContainer</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#eeb8be160ad353c61df7fef7eed128d5">m_data</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Container for the StateActionData objects that comprise all the data for this primitive action.  <a href="#eeb8be160ad353c61df7fef7eed128d5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classPrimitiveTask.html#6953483f10eabeedd24bd347662bb039">ModelContainer</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#4d7fc5367a292a434b30c72a6b2f5bb8">m_models</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Container for the <a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a> objects that this <a class="el" href="classPrimitiveTask.html">PrimitiveTask</a> returns via <a class="el" href="classPrimitiveTask.html#5b1bcb9bda510253baedd1c9d2452084">model()</a>.  <a href="#4d7fc5367a292a434b30c72a6b2f5bb8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">std::set&lt; <a class="el" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveStateActionModelWeakRef</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#3fb782963a2a6b9a6a67453124fd6a94">m_inbox</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Container for <a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a> objects that have received an update message from a StateActionData and are therefore "dirty." These objects are cleaned in <a class="el" href="classPrimitiveTask.html#298cefb9b883188586ac6ad83b8ee5c9">propagate_changes()</a>.  <a href="#3fb782963a2a6b9a6a67453124fd6a94"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">boost::weak_ptr&lt; <a class="el" href="classPrimitiveTask.html">PrimitiveTask</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask.html#3eae5d6a027605b316e71f412de2079e">m_this</a></td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A simple struct for storing the observed outcomes for a particular state-action pair.  <a href="structPrimitiveTask_1_1PrimitiveStateActionData.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A model of a primitive action at a given instance state, generalized from data.  <a href="classPrimitiveTask_1_1PrimitiveStateActionModel.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structPrimitiveTask_1_1VectorEffectCountsComparator.html">VectorEffectCountsComparator</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A <a class="el" href="classTask.html">Task</a> that represents a primitive action provided by the environment. 
<p>
This object estimates the model of a primitive action from data. This model employs R-max-style optimism to ensure exploration when used in the <a class="el" href="classPlanner.html">Planner</a>. In particular, when insufficient data exists for a state whose model is queried, a <a class="el" href="classPrimitiveTask.html">PrimitiveTask</a> predicts a terminal transition (no successors) and an optimistic immediate reward. 
<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00063">63</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="1fac52c140a2100b93682f7c3abb898c"></a><!-- doxytag: member="PrimitiveTask::DataContainer" ref="1fac52c140a2100b93682f7c3abb898c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef __gnu_cxx::hash_map&lt;<a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a>, <a class="el" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> *, <a class="el" href="structStateHasher.html">StateHasher</a>&gt; <a class="el" href="classPrimitiveTask.html#1fac52c140a2100b93682f7c3abb898c">PrimitiveTask::DataContainer</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00262">262</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
</div>
</div><p>
<a class="anchor" name="55f939efd286e0da9d54f02016f7b549"></a><!-- doxytag: member="PrimitiveTask::EffectCounts" ref="55f939efd286e0da9d54f02016f7b549" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;std::pair&lt;<a class="el" href="action_8hh.html#6db387a1b7176f31921d6c6d33cac115">EffectRef</a>, unsigned&gt; &gt; <a class="el" href="classPrimitiveTask.html#55f939efd286e0da9d54f02016f7b549">PrimitiveTask::EffectCounts</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A tally of observed effects. 
<p>
The contents of this data structure must be sorted (using the default comparator), and no two elements can have the same first part (<a class="el" href="classEffect.html">Effect</a> pointer). 
<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00120">120</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
</div>
</div><p>
<a class="anchor" name="6953483f10eabeedd24bd347662bb039"></a><!-- doxytag: member="PrimitiveTask::ModelContainer" ref="6953483f10eabeedd24bd347662bb039" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef __gnu_cxx::hash_map&lt;<a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a>, <a class="el" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveStateActionModelWeakRef</a>, <a class="el" href="structStateHasher.html">StateHasher</a>&gt; <a class="el" href="classPrimitiveTask.html#6953483f10eabeedd24bd347662bb039">PrimitiveTask::ModelContainer</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00273">273</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
</div>
</div><p>
<a class="anchor" name="17db518b88d9a5abd7c403a9910600cf"></a><!-- doxytag: member="PrimitiveTask::PrimitiveStateActionModelRef" ref="17db518b88d9a5abd7c403a9910600cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::shared_ptr&lt;<a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a>&gt; <a class="el" href="classPrimitiveTask.html#17db518b88d9a5abd7c403a9910600cf">PrimitiveTask::PrimitiveStateActionModelRef</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00134">134</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
</div>
</div><p>
<a class="anchor" name="980bccaad9f715e937100ad5c2fe6111"></a><!-- doxytag: member="PrimitiveTask::PrimitiveStateActionModelWeakRef" ref="980bccaad9f715e937100ad5c2fe6111" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef boost::weak_ptr&lt;<a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a>&gt; <a class="el" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveTask::PrimitiveStateActionModelWeakRef</a><code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00138">138</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
</div>
</div><p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="72593d9f714ab0cf62765b383cd7eefc"></a><!-- doxytag: member="PrimitiveTask::~PrimitiveTask" ref="72593d9f714ab0cf62765b383cd7eefc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PrimitiveTask::~PrimitiveTask           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00075">75</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00269">m_data</a>.
</div>
</div><p>
<a class="anchor" name="08c4ba5db57ca4c5fee827079d6ab1e2"></a><!-- doxytag: member="PrimitiveTask::PrimitiveTask" ref="08c4ba5db57ca4c5fee827079d6ab1e2" args="(const std::string &amp;name, int primitive, double threshold, double maxval, const DynamicAveragerRef &amp;modelapproximator, const StatePredicateRef &amp;precondition)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PrimitiveTask::PrimitiveTask           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>primitive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>maxval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="averager_8hh.html#749fa596c13494867102d3823a4da161">DynamicAveragerRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>modelapproximator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>precondition</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00064">64</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00051">create()</a>.
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="520d5e4a9e3d0bbfe1b087190ffbe86b"></a><!-- doxytag: member="PrimitiveTask::action" ref="520d5e4a9e3d0bbfe1b087190ffbe86b" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int PrimitiveTask::action           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The primitive action that this <a class="el" href="classTask.html">Task</a> models. 
<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00112">112</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00253">m_primitive</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00129">debug()</a>.
</div>
</div><p>
<a class="anchor" name="0321887c92e72de52f4648a1acc3c6f6"></a><!-- doxytag: member="PrimitiveTask::available" ref="0321887c92e72de52f4648a1acc3c6f6" args="(const StateVectorRef &amp;s) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PrimitiveTask::available           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Whether this task may be executed in a given state. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>A state </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True iff this task may be executed at s </dd></dl>

<p>
Implements <a class="el" href="classTask.html#f57e6356901caa1b145870e3cb0ee784">Task</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00095">95</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00258">m_precondition</a>.
</div>
</div><p>
<a class="anchor" name="37973b035721dad8d8b8fe2c522548ee"></a><!-- doxytag: member="PrimitiveTask::averager" ref="37973b035721dad8d8b8fe2c522548ee" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="averager_8hh.html#9db2ed62c7922adac793f2607dcc9ae2">AveragerRef</a> PrimitiveTask::averager           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [protected, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Reimplemented in <a class="el" href="classDiscretizedPrimitiveTask.html#d8ee5c0604a023f24e328a050dd1601d">DiscretizedPrimitiveTask</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00281">281</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00257">m_averager</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00110">model()</a>.
</div>
</div><p>
<a class="anchor" name="e3bc070d4cc07c8520a1787d6b00e88b"></a><!-- doxytag: member="PrimitiveTask::compute_name" ref="e3bc070d4cc07c8520a1787d6b00e88b" args="(int primitive)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string PrimitiveTask::compute_name           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>primitive</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00274">274</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
</div>
</div><p>
<a class="anchor" name="cd13d76e8398c6e6f099293a754ec592"></a><!-- doxytag: member="PrimitiveTask::create" ref="cd13d76e8398c6e6f099293a754ec592" args="(const std::string &amp;name, int primitive, double threshold, double maxval, const DynamicAveragerRef &amp;modelapproximator, const StatePredicateRef &amp;precondition)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="action_8hh.html#ebbdc64dd0e954309f7d84b47a9734ff">TaskRef</a> PrimitiveTask::create           </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>primitive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>maxval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="averager_8hh.html#749fa596c13494867102d3823a4da161">DynamicAveragerRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>modelapproximator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>precondition</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Creates a new <a class="el" href="classPrimitiveTask.html">PrimitiveTask</a> object, initialized with no data. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>A unique name for this task. If left empty, the name is generated from the primitive action number. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>primitive</em>&nbsp;</td><td>The action primitive, assumed to be an int </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>threshold</em>&nbsp;</td><td>The amount of (generalized, weighted) data required before turning off optimism at a given query state </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxval</em>&nbsp;</td><td>An upper bound on the value of a state, used as the one-step reward of an insufficiently explored action </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>modelapproximator</em>&nbsp;</td><td>The <a class="el" href="classAverager.html">Averager</a> used to generalize from data to a given query state. This pointer must remain valid of the lifetime of this object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>precondition</em>&nbsp;</td><td>The predicate that determines when this primitive is available </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00051">51</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8cc-source.html#l00064">PrimitiveTask()</a>.
<p>
Referenced by <a class="el" href="FittedRmax-FPWorld_8cc-source.html#l00052">get_task_hierarchy()</a>.
</div>
</div><p>
<a class="anchor" name="167b0657ab07abd2165c64d12ec4aba4"></a><!-- doxytag: member="PrimitiveTask::debug" ref="167b0657ab07abd2165c64d12ec4aba4" args="(std::ostream &amp;out)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrimitiveTask::debug           </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&nbsp;</td>
          <td class="paramname"> <em>out</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Implements <a class="el" href="classTask.html#379b5d7c0ad21938b3cc7ba800d1e9fd">Task</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00129">129</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00112">action()</a>, and <a class="el" href="primitive_8hh-source.html#l00279">m_models</a>.
</div>
</div><p>
<a class="anchor" name="3ac3595f5617ad504d0f8eb3f5e1fce4"></a><!-- doxytag: member="PrimitiveTask::get_data" ref="3ac3595f5617ad504d0f8eb3f5e1fce4" args="(const StateVectorRef &amp;state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a>* PrimitiveTask::get_data           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>state</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Fetches or creates a data structure for recording the observed data for a given state (with this primitive action). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A state whose data to fetch. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A <a class="el" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> that contains all known data at the given state for this primitive action. This object will exist for the lifetime of this <a class="el" href="classPrimitiveTask.html">PrimitiveTask</a>. </dd></dl>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00236">236</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00269">m_data</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00328">DiscretizedPrimitiveTask::update()</a>, and <a class="el" href="primitive_8cc-source.html#l00138">update()</a>.
</div>
</div><p>
<a class="anchor" name="5b1bcb9bda510253baedd1c9d2452084"></a><!-- doxytag: member="PrimitiveTask::model" ref="5b1bcb9bda510253baedd1c9d2452084" args="(const StateVectorRef &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="action_8hh.html#c3ccf319df0159196b73a6f8cbd0e702">StateActionModelRef</a> PrimitiveTask::model           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gives the dynamics of this task at the given state. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>A state </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A <a class="el" href="classStateActionModel.html">StateActionModel</a> predicting the effects of this <a class="el" href="classTask.html">Task</a> at the given state. </dd></dl>

<p>
Implements <a class="el" href="classTask.html#a0e590c276dfb09d337ca0a2ac24d5cc">Task</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00110">110</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8cc-source.html#l00281">averager()</a>, <a class="el" href="primitive_8cc-source.html#l00162">PrimitiveTask::PrimitiveStateActionModel::create()</a>, <a class="el" href="primitive_8hh-source.html#l00279">m_models</a>, and <a class="el" href="primitive_8hh-source.html#l00287">m_this</a>.
</div>
</div><p>
<a class="anchor" name="fa2f8003dc6750a5a957ce481419fc6c"></a><!-- doxytag: member="PrimitiveTask::name" ref="fa2f8003dc6750a5a957ce481419fc6c" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string &amp; PrimitiveTask::name           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Implements <a class="el" href="classTask.html#de587e5e1a79d6800ac1a96a59aa9abe">Task</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00090">90</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00251">m_name</a>.
</div>
</div><p>
<a class="anchor" name="14c6c9275c27f21c976647bbba76b773"></a><!-- doxytag: member="PrimitiveTask::policy" ref="14c6c9275c27f21c976647bbba76b773" args="(const StateVectorRef &amp;s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="action_8hh.html#6281154b7ce7b0b6d13e32da4429f22e">StatePolicyRef</a> PrimitiveTask::policy           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gives the subtask to perform at the given state. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>A state return NULL if this task is primitive, otherwise a <a class="el" href="classStatePolicy.html">StatePolicy</a> that gives the subtask to execute at the given state. This policy, along with the subtask's models, define the model reported by this Task's <a class="el" href="classPrimitiveTask.html#5b1bcb9bda510253baedd1c9d2452084">model()</a> method. </td></tr>
  </table>
</dl>

<p>
Implements <a class="el" href="classTask.html#8b5e72ef32b3cba82e0253ec174d61e4">Task</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00105">105</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
</div>
</div><p>
<a class="anchor" name="298cefb9b883188586ac6ad83b8ee5c9"></a><!-- doxytag: member="PrimitiveTask::propagate_changes" ref="298cefb9b883188586ac6ad83b8ee5c9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrimitiveTask::propagate_changes           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Propagates changes in either the data (for PrimitiveTasks) or from lower level tasks (for CompositeTasks) to the (possibly abstract) model of this <a class="el" href="classTask.html">Task</a>. 
<p>

<p>
Implements <a class="el" href="classTask.html#167c904e3a1869c0d1b0f25ab07e893b">Task</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00120">120</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00285">m_inbox</a>.
</div>
</div><p>
<a class="anchor" name="d2a12ec48dd60814f42e98e431e93a95"></a><!-- doxytag: member="PrimitiveTask::set_weak_this_reference" ref="d2a12ec48dd60814f42e98e431e93a95" args="(const PrimitiveTaskRef &amp;ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrimitiveTask::set_weak_this_reference           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="primitive_8hh.html#cffa22f190ab415bff28ba0b09c2c744">PrimitiveTaskRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>ref</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [inline, protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00222">222</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00287">m_this</a>.
</div>
</div><p>
<a class="anchor" name="2ec43e14cff3f4256de1d1778c5671d9"></a><!-- doxytag: member="PrimitiveTask::terminal" ref="2ec43e14cff3f4256de1d1778c5671d9" args="(const StateVectorRef &amp;s) const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PrimitiveTask::terminal           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Whether this task terminates in a given state. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>A state </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True iff this task would terminate at state s </dd></dl>

<p>
Implements <a class="el" href="classTask.html#801e5b034c77a6e36698dc0fa1f87bbe">Task</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00100">100</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
</div>
</div><p>
<a class="anchor" name="b6d08c9cb7f6a5b3ce4650bb0983b2af"></a><!-- doxytag: member="PrimitiveTask::update" ref="b6d08c9cb7f6a5b3ce4650bb0983b2af" args="(PrimitiveStateActionData *dat, double r)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrimitiveTask::update           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structPrimitiveTask_1_1PrimitiveStateActionData.html">PrimitiveStateActionData</a> *&nbsp;</td>
          <td class="paramname"> <em>dat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>r</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Completes an update of the data record (for some state), performing all the changes that do not depend on whether or not the new data comes from a terminal transition. 
<p>
This procedure updates the cumulative reward, the weight, and adds the appropriate <a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a> objects to the inbox. 
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00286">286</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00145">PrimitiveTask::PrimitiveStateActionData::count</a>, <a class="el" href="primitive_8hh-source.html#l00146">PrimitiveTask::PrimitiveStateActionData::cumulative_reward</a>, <a class="el" href="primitive_8hh-source.html#l00285">m_inbox</a>, and <a class="el" href="primitive_8hh-source.html#l00148">PrimitiveTask::PrimitiveStateActionData::observers</a>.
</div>
</div><p>
<a class="anchor" name="dadb5e4269d027a6a0e7e9785185ccdf"></a><!-- doxytag: member="PrimitiveTask::update" ref="dadb5e4269d027a6a0e7e9785185ccdf" args="(const StateVectorRef &amp;s, double r)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrimitiveTask::update           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>r</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Incorporates a terminal experience to update the model. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The state at which the primitive action was executed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>r</em>&nbsp;</td><td>The immediate reward obtained </td></tr>
  </table>
</dl>

<p>
Reimplemented in <a class="el" href="classDiscretizedPrimitiveTask.html#6b9c663d54448554bb2b29561140f6a8">DiscretizedPrimitiveTask</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00151">151</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8hh-source.html#l00236">get_data()</a>, <a class="el" href="primitive_8hh-source.html#l00257">m_averager</a>, and <a class="el" href="primitive_8cc-source.html#l00138">update()</a>.
</div>
</div><p>
<a class="anchor" name="17b52f73561bbb68d3f1753f3d0c14c2"></a><!-- doxytag: member="PrimitiveTask::update" ref="17b52f73561bbb68d3f1753f3d0c14c2" args="(const StateVectorRef &amp;s, double r, const StateVectorRef &amp;succ)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PrimitiveTask::update           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="state_8hh.html#4b1eec1dbb253fd12007b9f7bb90ce93">StateVectorRef</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>succ</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Incorporates a nonterminal experience to update the model. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The state at which the primitive action was executed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>r</em>&nbsp;</td><td>The immediate reward obtained </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>succ</em>&nbsp;</td><td>The successor state observed </td></tr>
  </table>
</dl>

<p>
Reimplemented in <a class="el" href="classDiscretizedPrimitiveTask.html#08c37b90d5a0ddf03e31f50049777ca7">DiscretizedPrimitiveTask</a>.
<p>
Definition at line <a class="el" href="primitive_8cc-source.html#l00138">138</a> of file <a class="el" href="primitive_8cc-source.html">primitive.cc</a>.
<p>
References <a class="el" href="primitive_8cc-source.html#l00007">VectorEffect::create()</a>, <a class="el" href="primitive_8hh-source.html#l00147">PrimitiveTask::PrimitiveStateActionData::effect_counts</a>, <a class="el" href="primitive_8hh-source.html#l00236">get_data()</a>, <a class="el" href="primitive_8hh-source.html#l00257">m_averager</a>, and <a class="el" href="state_8hh-source.html#l00259">vector_set_insert()</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00328">DiscretizedPrimitiveTask::update()</a>, and <a class="el" href="primitive_8cc-source.html#l00151">update()</a>.
</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="e56d82bcd6ded4ea98dc978df96b3b0a"></a><!-- doxytag: member="PrimitiveTask::m_averager" ref="e56d82bcd6ded4ea98dc978df96b3b0a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="averager_8hh.html#749fa596c13494867102d3823a4da161">DynamicAveragerRef</a> <a class="el" href="classPrimitiveTask.html#e56d82bcd6ded4ea98dc978df96b3b0a">PrimitiveTask::m_averager</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00257">257</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00281">averager()</a>, and <a class="el" href="primitive_8cc-source.html#l00138">update()</a>.
</div>
</div><p>
<a class="anchor" name="eeb8be160ad353c61df7fef7eed128d5"></a><!-- doxytag: member="PrimitiveTask::m_data" ref="eeb8be160ad353c61df7fef7eed128d5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPrimitiveTask.html#1fac52c140a2100b93682f7c3abb898c">DataContainer</a> <a class="el" href="classPrimitiveTask.html#eeb8be160ad353c61df7fef7eed128d5">PrimitiveTask::m_data</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Container for the StateActionData objects that comprise all the data for this primitive action. 
<p>
The keys are basis states in the averager. The data are pointers to the StateActionData objects that store the corresponding transition and reward data. This container owns the data pointers. 
<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00269">269</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
Referenced by <a class="el" href="primitive_8hh-source.html#l00236">get_data()</a>, and <a class="el" href="primitive_8cc-source.html#l00075">~PrimitiveTask()</a>.
</div>
</div><p>
<a class="anchor" name="3fb782963a2a6b9a6a67453124fd6a94"></a><!-- doxytag: member="PrimitiveTask::m_inbox" ref="3fb782963a2a6b9a6a67453124fd6a94" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="classPrimitiveTask.html#980bccaad9f715e937100ad5c2fe6111">PrimitiveStateActionModelWeakRef</a>&gt; <a class="el" href="classPrimitiveTask.html#3fb782963a2a6b9a6a67453124fd6a94">PrimitiveTask::m_inbox</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Container for <a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a> objects that have received an update message from a StateActionData and are therefore "dirty." These objects are cleaned in <a class="el" href="classPrimitiveTask.html#298cefb9b883188586ac6ad83b8ee5c9">propagate_changes()</a>. 
<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00285">285</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00120">propagate_changes()</a>, and <a class="el" href="primitive_8cc-source.html#l00286">update()</a>.
</div>
</div><p>
<a class="anchor" name="8d12da0fac9616aea7c4d6314794cb4b"></a><!-- doxytag: member="PrimitiveTask::m_maxval" ref="8d12da0fac9616aea7c4d6314794cb4b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double <a class="el" href="classPrimitiveTask.html#8d12da0fac9616aea7c4d6314794cb4b">PrimitiveTask::m_maxval</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00255">255</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
</div>
</div><p>
<a class="anchor" name="4d7fc5367a292a434b30c72a6b2f5bb8"></a><!-- doxytag: member="PrimitiveTask::m_models" ref="4d7fc5367a292a434b30c72a6b2f5bb8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classPrimitiveTask.html#6953483f10eabeedd24bd347662bb039">ModelContainer</a> <a class="el" href="classPrimitiveTask.html#4d7fc5367a292a434b30c72a6b2f5bb8">PrimitiveTask::m_models</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Container for the <a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a> objects that this <a class="el" href="classPrimitiveTask.html">PrimitiveTask</a> returns via <a class="el" href="classPrimitiveTask.html#5b1bcb9bda510253baedd1c9d2452084">model()</a>. 
<p>
The keys are query states stored in the averager. The data are <a class="el" href="classPrimitiveTask_1_1PrimitiveStateActionModel.html">PrimitiveStateActionModel</a> objects that are return via <a class="el" href="classPrimitiveTask.html#5b1bcb9bda510253baedd1c9d2452084">model()</a>. 
<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00279">279</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00129">debug()</a>, and <a class="el" href="primitive_8cc-source.html#l00110">model()</a>.
</div>
</div><p>
<a class="anchor" name="56222cf65938ad991105d95b3bea755d"></a><!-- doxytag: member="PrimitiveTask::m_name" ref="56222cf65938ad991105d95b3bea755d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::string <a class="el" href="classPrimitiveTask.html#56222cf65938ad991105d95b3bea755d">PrimitiveTask::m_name</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00251">251</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00090">name()</a>.
</div>
</div><p>
<a class="anchor" name="7f298bfc303c1dfd9be73d843214e7f9"></a><!-- doxytag: member="PrimitiveTask::m_precondition" ref="7f298bfc303c1dfd9be73d843214e7f9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="state_8hh.html#1692c157ceef0c431bb4b5060e55e706">StatePredicateRef</a> <a class="el" href="classPrimitiveTask.html#7f298bfc303c1dfd9be73d843214e7f9">PrimitiveTask::m_precondition</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00258">258</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00095">available()</a>.
</div>
</div><p>
<a class="anchor" name="f104f38e94a01af6786071eba8224567"></a><!-- doxytag: member="PrimitiveTask::m_primitive" ref="f104f38e94a01af6786071eba8224567" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int <a class="el" href="classPrimitiveTask.html#f104f38e94a01af6786071eba8224567">PrimitiveTask::m_primitive</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00253">253</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
Referenced by <a class="el" href="primitive_8hh-source.html#l00112">action()</a>.
</div>
</div><p>
<a class="anchor" name="3eae5d6a027605b316e71f412de2079e"></a><!-- doxytag: member="PrimitiveTask::m_this" ref="3eae5d6a027605b316e71f412de2079e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boost::weak_ptr&lt;<a class="el" href="classPrimitiveTask.html">PrimitiveTask</a>&gt; <a class="el" href="classPrimitiveTask.html#3eae5d6a027605b316e71f412de2079e">PrimitiveTask::m_this</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00287">287</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
<p>
Referenced by <a class="el" href="primitive_8cc-source.html#l00110">model()</a>, and <a class="el" href="primitive_8hh-source.html#l00222">set_weak_this_reference()</a>.
</div>
</div><p>
<a class="anchor" name="522855a6707d36bd53f1523e9ed28615"></a><!-- doxytag: member="PrimitiveTask::m_threshold" ref="522855a6707d36bd53f1523e9ed28615" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const double <a class="el" href="classPrimitiveTask.html#522855a6707d36bd53f1523e9ed28615">PrimitiveTask::m_threshold</a><code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>
Definition at line <a class="el" href="primitive_8hh-source.html#l00254">254</a> of file <a class="el" href="primitive_8hh-source.html">primitive.hh</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="primitive_8hh-source.html">primitive.hh</a><li><a class="el" href="primitive_8cc-source.html">primitive.cc</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Dec 1 14:50:57 2010 for Fitted R-MAXQ by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
